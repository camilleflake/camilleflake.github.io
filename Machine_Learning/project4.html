<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>project4 – Camille Flake - Data Science Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Images/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5bbd6efc9c92c8972596ed1719573279.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-43a4dd859d45b137fff9cb2196990f1a.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Camille Flake - Data Science Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resume.html"> 
<span class="menu-text">My Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cleansing.html"> 
<span class="menu-text">Data Cleansing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../exploration.html"> 
<span class="menu-text">Data Exploration</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../story_telling.html"> 
<span class="menu-text">Story Telling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../ml.html" aria-current="page"> 
<span class="menu-text">Machine Learning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../full_stack.html"> 
<span class="menu-text">Full Stack</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../competition.html"> 
<span class="menu-text">Competition</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Machine_Learning/project4.html">Project 4</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Machine Learning</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Machine_Learning/project1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project 1</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Machine_Learning/project2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project 2</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Machine_Learning/project3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project 3</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Machine_Learning/project4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Project 4</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Machine_Learning/project5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project 5</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#elevator-pitch" id="toc-elevator-pitch" class="nav-link active" data-scroll-target="#elevator-pitch">Elevator pitch</a></li>
  <li><a href="#questiontask-1" id="toc-questiontask-1" class="nav-link" data-scroll-target="#questiontask-1">Question|Task 1</a></li>
  <li><a href="#questiontask-2" id="toc-questiontask-2" class="nav-link" data-scroll-target="#questiontask-2">Question|Task 2</a></li>
  <li><a href="#questiontask-3" id="toc-questiontask-3" class="nav-link" data-scroll-target="#questiontask-3">Question|Task 3</a></li>
  <li><a href="#questiontask-4" id="toc-questiontask-4" class="nav-link" data-scroll-target="#questiontask-4">Question|Task 4</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<p>title: “Client Report - [Project 4]” subtitle: “Course DS 250” author: “[Camille Flake]” format: html: self-contained: true page-layout: full title-block-banner: true toc: true toc-depth: 3 toc-location: body number-sections: false html-math-method: katex code-fold: true code-summary: “Show the code” code-overflow: wrap code-copy: hover code-tools: source: false toggle: true caption: See code execute: warning: false</p>
<hr>
<section id="elevator-pitch" class="level2">
<h2 class="anchored" data-anchor-id="elevator-pitch">Elevator pitch</h2>
<p>Our model leverages Gradient Boosting techniques to accurately classify whether homes in Colorado were built before or after 1980, achieving a high accuracy of 93%. By analyzing key features of homes, the model effectively distinguishes older homes with minimal false predictions. This solution is both accurate and actionable, helping you meet your public safety goals efficiently.</p>
</section>
<section id="questiontask-1" class="level2">
<h2 class="anchored" data-anchor-id="questiontask-1">Question|Task 1</h2>
<p><strong>Create 2-3 charts that evaluate potential relationships between the home variables and before1980. Explain what you learn from the charts that could help a machine learning algorithm.</strong></p>
<p>The first chart can contribute to the classification of homes built before 1980, as there is a cluster around the lower value of finished basements and a smaller living area for that predicted time.</p>
<p>Chart 2 indicates that the number of stories is a srong indicator for homes built pre 1980, because it shows most homes to be one story compared to two story which shows about half the number of one story homes.</p>
<p>Chart 3 shows stories, living area, and number of bedrooms to be the features with the strongest correlation to homes built before 1980 and therefore should be prioritized. Features like finished basement does not have as strong of a correlation but is still useful when combined with other variables.</p>
<div id="cell-Q1" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Include and execute your code here</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> lets_plot <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>LetsPlot.setup_html()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>{sys.executable} <span class="op">-</span>m pip install scikit<span class="op">-</span>learn</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># %% </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># scikit learn froms</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> tree</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.naive_bayes <span class="im">import</span> GaussianNB</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> GradientBoostingClassifier</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="q1" class="cell-output cell-output-display">

            <div id="UHl4VR"></div>
            <script type="text/javascript" data-lets-plot-script="library">
                if(!window.letsPlotCallQueue) {
                    window.letsPlotCallQueue = [];
                }; 
                window.letsPlotCall = function(f) {
                    window.letsPlotCallQueue.push(f);
                };
                (function() {
                    var script = document.createElement("script");
                    script.type = "text/javascript";
                    script.src = "https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.5.2/js-package/distr/lets-plot.min.js";
                    script.onload = function() {
                        window.letsPlotCall = function(f) {f();};
                        window.letsPlotCallQueue.forEach(function(f) {f();});
                        window.letsPlotCallQueue = [];
                        
                    };
                    script.onerror = function(event) {
                        window.letsPlotCall = function(f) {};    // noop
                        window.letsPlotCallQueue = [];
                        var div = document.createElement("div");
                        div.style.color = 'darkred';
                        div.textContent = 'Error loading Lets-Plot JS';
                        document.getElementById("UHl4VR").appendChild(div);
                    };
                    var e = document.getElementById("UHl4VR");
                    e.appendChild(script);
                })()
            </script>
            
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: scikit-learn in /opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages (1.6.0)
Requirement already satisfied: numpy&gt;=1.19.5 in /opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages (from scikit-learn) (2.2.0)
Requirement already satisfied: scipy&gt;=1.6.0 in /opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages (from scikit-learn) (1.14.1)
Requirement already satisfied: joblib&gt;=1.2.0 in /opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages (from scikit-learn) (1.4.2)
Requirement already satisfied: threadpoolctl&gt;=3.1.0 in /opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages (from scikit-learn) (3.5.0)</code></pre>
</div>
</div>
<div id="4921539e" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>dwellings_ml <span class="op">=</span> pd.read_csv(<span class="st">"https://github.com/byuidatascience/data4dwellings/raw/master/data-raw/dwellings_ml/dwellings_ml.csv"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e5d9a9c9" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>h_subset <span class="op">=</span> dwellings_ml.<span class="bu">filter</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'livearea'</span>, <span class="st">'finbsmnt'</span>, <span class="st">'basement'</span>, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'yearbuilt'</span>, <span class="st">'nocars'</span>, <span class="st">'numbdrm'</span>, <span class="st">'numbaths'</span>, <span class="st">'before1980'</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'stories'</span>, <span class="st">'yrbuilt'</span>]).sample(<span class="dv">500</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>h_subset <span class="op">=</span> h_subset.dropna(subset<span class="op">=</span>[<span class="st">'livearea'</span>, <span class="st">'finbsmnt'</span>, <span class="st">'before1980'</span>, <span class="st">'basement'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="a19d0a53" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> ggplot(h_subset, aes(x<span class="op">=</span><span class="st">'livearea'</span>, y<span class="op">=</span><span class="st">'finbsmnt'</span>, color<span class="op">=</span><span class="st">'before1980'</span>)) <span class="op">+</span> geom_point()<span class="co"># + facet_wrap('~basement')</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>chart.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
   <div id="WdIItk"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   var containerDiv = document.getElementById("WdIItk");
   var observer = new ResizeObserver(function(entries) {
       for (let entry of entries) {
           var width = containerDiv.clientWidth
           if (entry.contentBoxSize && width > 0) {
           
               // Render plot
               if (observer) {
                   observer.disconnect();
                   observer = null;
               }

               var plotSpec={
"data":{
"livearea":[1152.0,880.0,767.0,1199.0,2092.0,874.0,701.0,2208.0,2170.0,1352.0,1297.0,1080.0,683.0,1274.0,2077.0,873.0,728.0,1743.0,2972.0,2226.0,1096.0,3146.0,1106.0,2761.0,847.0,1626.0,2271.0,904.0,697.0,2209.0,2144.0,2554.0,938.0,1088.0,941.0,1480.0,727.0,1722.0,1994.0,908.0,3261.0,1758.0,2562.0,2306.0,2153.0,1200.0,990.0,1920.0,711.0,2141.0,2229.0,1413.0,712.0,1247.0,1978.0,1602.0,809.0,894.0,749.0,825.0,1077.0,1584.0,1005.0,641.0,813.0,1778.0,2090.0,1910.0,1693.0,810.0,1287.0,1358.0,1494.0,996.0,1401.0,1151.0,912.0,2440.0,1039.0,1589.0,1149.0,2716.0,1320.0,1278.0,1413.0,922.0,763.0,1070.0,1785.0,971.0,1935.0,874.0,1601.0,1056.0,1558.0,1400.0,1088.0,2094.0,2549.0,1681.0,1568.0,834.0,798.0,690.0,2902.0,1203.0,676.0,1474.0,1722.0,939.0,1494.0,952.0,801.0,1319.0,993.0,1670.0,1231.0,649.0,1810.0,961.0,1274.0,902.0,1703.0,1164.0,922.0,1612.0,3320.0,2144.0,765.0,2180.0,964.0,1333.0,2223.0,1133.0,1508.0,891.0,1048.0,1006.0,976.0,524.0,1005.0,1013.0,927.0,808.0,1053.0,1632.0,1614.0,810.0,2301.0,1068.0,1487.0,1305.0,1786.0,1537.0,2061.0,1743.0,1500.0,2242.0,2961.0,1087.0,1075.0,982.0,1975.0,784.0,509.0,900.0,1747.0,2758.0,3339.0,1889.0,1451.0,1237.0,784.0,920.0,855.0,1345.0,558.0,1224.0,1731.0,3706.0,1516.0,1261.0,1508.0,2484.0,3150.0,4107.0,970.0,808.0,1077.0,1152.0,2169.0,1785.0,3524.0,1463.0,1343.0,1838.0,1702.0,512.0,887.0,1104.0,1305.0,969.0,744.0,968.0,711.0,2029.0,2619.0,2585.0,1057.0,1073.0,807.0,825.0,1060.0,953.0,1237.0,768.0,1760.0,1019.0,1456.0,881.0,1420.0,1795.0,2100.0,837.0,3317.0,1003.0,1322.0,1136.0,1017.0,1908.0,1956.0,1553.0,1660.0,1378.0,1370.0,1358.0,788.0,3228.0,851.0,1342.0,944.0,838.0,3500.0,744.0,2946.0,864.0,1124.0,1712.0,1712.0,563.0,1162.0,1008.0,1752.0,1186.0,1000.0,2152.0,2036.0,2763.0,1888.0,1371.0,3898.0,2543.0,2253.0,1263.0,1236.0,1017.0,822.0,1357.0,1416.0,642.0,1746.0,1164.0,1108.0,713.0,1441.0,462.0,1121.0,762.0,1887.0,998.0,2761.0,1208.0,1681.0,1755.0,1188.0,1557.0,938.0,3525.0,2036.0,1321.0,1145.0,1040.0,1204.0,944.0,1004.0,1449.0,1600.0,715.0,1039.0,1981.0,1641.0,4514.0,894.0,980.0,1090.0,1443.0,999.0,3103.0,732.0,2365.0,1142.0,1356.0,844.0,1149.0,1889.0,2082.0,774.0,1496.0,752.0,1733.0,772.0,1063.0,1754.0,1278.0,2578.0,1518.0,1359.0,1177.0,2793.0,1002.0,2093.0,1198.0,3179.0,1675.0,1058.0,1808.0,899.0,974.0,3215.0,902.0,861.0,3004.0,1178.0,837.0,731.0,2077.0,738.0,1939.0,2415.0,821.0,960.0,1340.0,2834.0,1932.0,2432.0,954.0,2374.0,499.0,1200.0,1549.0,976.0,831.0,3687.0,3235.0,1126.0,1074.0,1200.0,1044.0,751.0,2729.0,2345.0,1056.0,2909.0,1428.0,2238.0,1413.0,1420.0,1200.0,2801.0,1056.0,658.0,1731.0,1782.0,1767.0,2079.0,617.0,2115.0,811.0,1031.0,970.0,1620.0,1161.0,1226.0,1133.0,1423.0,1124.0,1096.0,1610.0,1034.0,792.0,1733.0,2301.0,1147.0,1189.0,2503.0,995.0,1502.0,876.0,2626.0,1900.0,2856.0,1203.0,1697.0,724.0,1021.0,3215.0,1884.0,2978.0,703.0,743.0,900.0,1607.0,2202.0,1866.0,966.0,804.0,1014.0,1091.0,1247.0,1845.0,1836.0,719.0,853.0,1363.0,1195.0,1234.0,1259.0,1861.0,1950.0,1406.0,711.0,908.0,918.0,1700.0,715.0,2365.0,1817.0,1182.0,2058.0,1576.0,675.0,1472.0,2180.0,1225.0,904.0,1712.0,853.0,959.0,1432.0,1322.0,963.0,795.0,988.0,812.0,2527.0,1040.0,1743.0,1744.0,1779.0,1228.0,1532.0,1317.0,1840.0,1412.0,909.0,919.0,1225.0,2157.0,1489.0,834.0,1895.0,938.0,1231.0,890.0,3483.0,951.0,870.0,1734.0,1626.0,1248.0,1033.0,1002.0,870.0,1267.0,1582.0,743.0,1238.0,2566.0,1798.0,1224.0],
"finbsmnt":[0.0,0.0,0.0,0.0,0.0,0.0,0.0,1008.0,0.0,1266.0,0.0,594.0,0.0,0.0,0.0,0.0,0.0,0.0,1208.0,0.0,980.0,0.0,0.0,1227.0,0.0,0.0,1009.0,0.0,0.0,0.0,1020.0,847.0,0.0,0.0,941.0,800.0,0.0,0.0,850.0,100.0,1620.0,0.0,1661.0,940.0,960.0,0.0,0.0,1602.0,0.0,0.0,414.0,0.0,330.0,0.0,0.0,190.0,730.0,614.0,712.0,495.0,977.0,495.0,375.0,641.0,731.0,1600.0,475.0,856.0,700.0,0.0,0.0,579.0,0.0,0.0,1211.0,0.0,865.0,827.0,935.0,718.0,913.0,0.0,0.0,271.0,0.0,645.0,0.0,970.0,0.0,0.0,847.0,0.0,0.0,0.0,350.0,0.0,0.0,0.0,842.0,521.0,0.0,0.0,0.0,0.0,1166.0,0.0,0.0,0.0,0.0,839.0,300.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,661.0,865.0,1147.0,767.0,558.0,0.0,0.0,365.0,0.0,0.0,0.0,0.0,915.0,0.0,0.0,0.0,1370.0,380.0,0.0,0.0,0.0,0.0,1005.0,0.0,0.0,108.0,0.0,374.0,0.0,0.0,0.0,0.0,0.0,650.0,981.0,0.0,1462.0,0.0,1240.0,0.0,663.0,466.0,846.0,0.0,0.0,706.0,0.0,0.0,0.0,1950.0,3000.0,0.0,0.0,0.0,0.0,0.0,0.0,1278.0,0.0,0.0,537.0,0.0,628.0,630.0,1154.0,0.0,1137.0,2310.0,712.0,730.0,0.0,1008.0,0.0,0.0,0.0,0.0,257.0,0.0,0.0,0.0,0.0,0.0,392.0,0.0,0.0,871.0,0.0,1030.0,0.0,0.0,0.0,482.0,0.0,825.0,390.0,0.0,0.0,768.0,1584.0,0.0,0.0,0.0,0.0,0.0,1012.0,0.0,0.0,700.0,0.0,0.0,0.0,0.0,1702.0,0.0,715.0,0.0,0.0,700.0,0.0,0.0,680.0,0.0,0.0,0.0,569.0,0.0,0.0,0.0,512.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1000.0,0.0,0.0,0.0,0.0,300.0,1415.0,715.0,0.0,0.0,0.0,380.0,0.0,0.0,790.0,0.0,952.0,0.0,0.0,0.0,0.0,0.0,0.0,255.0,605.0,671.0,968.0,0.0,0.0,0.0,954.0,0.0,0.0,0.0,0.0,0.0,0.0,990.0,408.0,0.0,896.0,1345.0,398.0,0.0,935.0,292.0,1641.0,0.0,0.0,0.0,900.0,0.0,750.0,0.0,0.0,646.0,1028.0,1119.0,364.0,0.0,0.0,0.0,0.0,888.0,0.0,0.0,0.0,905.0,578.0,0.0,1385.0,0.0,0.0,0.0,1172.0,0.0,862.0,1066.0,1474.0,525.0,0.0,0.0,404.0,0.0,1340.0,0.0,0.0,1610.0,401.0,0.0,0.0,1150.0,0.0,0.0,0.0,0.0,768.0,0.0,0.0,875.0,0.0,0.0,834.0,0.0,0.0,378.0,0.0,0.0,0.0,1637.0,1070.0,912.0,0.0,886.0,0.0,0.0,1270.0,596.0,0.0,0.0,0.0,0.0,0.0,0.0,850.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,297.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,996.0,0.0,0.0,750.0,0.0,960.0,796.0,932.0,0.0,683.0,1425.0,0.0,778.0,903.0,1285.0,0.0,635.0,0.0,0.0,831.0,841.0,1113.0,0.0,0.0,0.0,0.0,1220.0,461.0,0.0,725.0,0.0,0.0,0.0,0.0,800.0,0.0,0.0,783.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,681.0,0.0,677.0,0.0,839.0,583.0,0.0,788.0,0.0,641.0,0.0,763.0,0.0,0.0,0.0,0.0,0.0,1432.0,0.0,482.0,450.0,889.0,0.0,0.0,919.0,0.0,225.0,0.0,246.0,424.0,0.0,463.0,0.0,0.0,0.0,0.0,460.0,1190.0,0.0,0.0,400.0,946.0,186.0,809.0,0.0,823.0,750.0,560.0,0.0,723.0,0.0,0.0,0.0,0.0,0.0,0.0,1001.0,0.0,0.0],
"before1980":[1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,0.0,0.0,0.0,1.0,1.0,1.0,0.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0]
},
"mapping":{
"x":"livearea",
"y":"finbsmnt",
"color":"before1980"
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"livearea"
},{
"type":"int",
"column":"finbsmnt"
},{
"type":"int",
"column":"basement"
},{
"type":"int",
"column":"nocars"
},{
"type":"int",
"column":"numbdrm"
},{
"type":"int",
"column":"numbaths"
},{
"type":"int",
"column":"before1980"
},{
"type":"int",
"column":"stories"
},{
"type":"int",
"column":"yrbuilt"
}]
},
"kind":"plot",
"scales":[],
"layers":[{
"geom":"point",
"mapping":{
},
"data_meta":{
},
"data":{
}
}],
"metainfo_list":[],
"spec_id":"1"
};
               window.letsPlotCall(function() {
       
               var toolbar = null;
               var plotContainer = containerDiv;               
               
                   var options = {
                       sizing: {
                           width_mode: "min",
                           height_mode: "scaled",
                           width: width
                       }
                   };
                   var fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer, options);
                   if (toolbar) {
                     toolbar.bind(fig);
                   }
               });
               
               break;
           }
       }
   });
   
   observer.observe(containerDiv);
   
   // ----------
   })();
   
   </script>
</div>
</div>
<div id="10d07484" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> h_subset.drop(columns<span class="op">=</span><span class="st">'before1980'</span>).corr().applymap(<span class="kw">lambda</span> x: <span class="ss">f'</span><span class="sc">{</span>x<span class="sc">:.2f}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_2295/3560486731.py:2: FutureWarning:

DataFrame.applymap has been deprecated. Use DataFrame.map instead.
</code></pre>
</div>
</div>
<div id="c1179c72" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>corr_chart <span class="op">=</span> ggplot(corr.reset_index().melt(id_vars<span class="op">=</span><span class="st">'index'</span>), aes(x<span class="op">=</span><span class="st">'index'</span>, y<span class="op">=</span><span class="st">'variable'</span>, fill<span class="op">=</span><span class="st">'value'</span>)) <span class="op">+</span> geom_tile() <span class="op">+</span> geom_text(aes(label<span class="op">=</span><span class="st">'value'</span>), color<span class="op">=</span><span class="st">'white'</span>, size<span class="op">=</span><span class="dv">6</span>) <span class="op">+</span> scale_fill_brewer(palette<span class="op">=</span><span class="st">'RdYlBu'</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>corr_chart.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
   <div id="I7frPG"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   var containerDiv = document.getElementById("I7frPG");
   var observer = new ResizeObserver(function(entries) {
       for (let entry of entries) {
           var width = containerDiv.clientWidth
           if (entry.contentBoxSize && width > 0) {
           
               // Render plot
               if (observer) {
                   observer.disconnect();
                   observer = null;
               }

               var plotSpec={
"data":{
"index":["livearea","finbsmnt","basement","nocars","numbdrm","numbaths","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","stories","yrbuilt"],
"variable":["livearea","livearea","livearea","livearea","livearea","livearea","livearea","livearea","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","basement","basement","basement","basement","basement","basement","basement","basement","nocars","nocars","nocars","nocars","nocars","nocars","nocars","nocars","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbaths","numbaths","numbaths","numbaths","numbaths","numbaths","numbaths","numbaths","stories","stories","stories","stories","stories","stories","stories","stories","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt"],
"value":["1.00","0.32","0.50","0.50","0.59","0.80","0.57","0.26","0.32","1.00","0.81","0.41","0.14","0.50","0.04","0.01","0.50","0.81","1.00","0.51","0.28","0.57","0.18","0.02","0.50","0.41","0.51","1.00","0.48","0.51","0.30","0.09","0.59","0.14","0.28","0.48","1.00","0.48","0.33","0.02","0.80","0.50","0.57","0.51","0.48","1.00","0.61","0.37","0.57","0.04","0.18","0.30","0.33","0.61","1.00","0.26","0.26","0.01","0.02","0.09","0.02","0.37","0.26","1.00"]
},
"mapping":{
"x":"index",
"y":"variable",
"fill":"value"
},
"data_meta":{
"series_annotations":[{
"type":"str",
"column":"index"
},{
"type":"str",
"column":"variable"
},{
"type":"str",
"column":"value"
}]
},
"kind":"plot",
"scales":[{
"aesthetic":"fill",
"palette":"RdYlBu",
"scale_mapper_kind":"color_brewer"
}],
"layers":[{
"geom":"tile",
"mapping":{
},
"data_meta":{
},
"data":{
}
},{
"geom":"text",
"mapping":{
"label":"value"
},
"data_meta":{
},
"color":"white",
"size":6.0,
"data":{
}
}],
"metainfo_list":[],
"spec_id":"2"
};
               window.letsPlotCall(function() {
       
               var toolbar = null;
               var plotContainer = containerDiv;               
               
                   var options = {
                       sizing: {
                           width_mode: "min",
                           height_mode: "scaled",
                           width: width
                       }
                   };
                   var fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer, options);
                   if (toolbar) {
                     toolbar.bind(fig);
                   }
               });
               
               break;
           }
       }
   });
   
   observer.observe(containerDiv);
   
   // ----------
   })();
   
   </script>
</div>
</div>
<div id="2b496207" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">## Now predict before 1980 </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>X_pred <span class="op">=</span> dwellings_ml.drop(dwellings_ml.<span class="bu">filter</span>(regex <span class="op">=</span> <span class="st">'before1980|yrbuilt'</span>).columns, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> dwellings_ml.<span class="bu">filter</span>(regex <span class="op">=</span> <span class="st">"before1980"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X_pred, y_pred, test_size <span class="op">=</span> <span class="fl">.35</span>, random_state <span class="op">=</span> <span class="dv">76</span>)  </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>X_train <span class="op">=</span> X_train.drop(columns<span class="op">=</span>[<span class="st">'parcel'</span>], errors<span class="op">=</span><span class="st">'ignore'</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>X_test <span class="op">=</span> X_test.drop(columns<span class="op">=</span>[<span class="st">'parcel'</span>], errors<span class="op">=</span><span class="st">'ignore'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="f3230da3" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#%%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>y_test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">before1980</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">16075</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10563</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14087</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9622</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2172</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8758</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8326</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20799</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8382</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6986</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>8020 rows × 1 columns</p>
</div>
</div>
</div>
<div id="61e9bdd8" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>X_train</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">abstrprd</th>
<th data-quarto-table-cell-role="th">livearea</th>
<th data-quarto-table-cell-role="th">finbsmnt</th>
<th data-quarto-table-cell-role="th">basement</th>
<th data-quarto-table-cell-role="th">totunits</th>
<th data-quarto-table-cell-role="th">stories</th>
<th data-quarto-table-cell-role="th">nocars</th>
<th data-quarto-table-cell-role="th">numbdrm</th>
<th data-quarto-table-cell-role="th">numbaths</th>
<th data-quarto-table-cell-role="th">sprice</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">arcstyle_SPLIT LEVEL</th>
<th data-quarto-table-cell-role="th">arcstyle_THREE-STORY</th>
<th data-quarto-table-cell-role="th">arcstyle_TRI-LEVEL</th>
<th data-quarto-table-cell-role="th">arcstyle_TRI-LEVEL WITH BASEMENT</th>
<th data-quarto-table-cell-role="th">arcstyle_TWO AND HALF-STORY</th>
<th data-quarto-table-cell-role="th">arcstyle_TWO-STORY</th>
<th data-quarto-table-cell-role="th">qualified_Q</th>
<th data-quarto-table-cell-role="th">qualified_U</th>
<th data-quarto-table-cell-role="th">status_I</th>
<th data-quarto-table-cell-role="th">status_V</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1153</td>
<td>1112</td>
<td>1876</td>
<td>0</td>
<td>1018</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>180000</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10550</td>
<td>1112</td>
<td>1450</td>
<td>225</td>
<td>674</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>221500</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14892</td>
<td>1112</td>
<td>953</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>2</td>
<td>1</td>
<td>102000</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15555</td>
<td>1114</td>
<td>1098</td>
<td>1006</td>
<td>1098</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>329000</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6806</td>
<td>1112</td>
<td>971</td>
<td>508</td>
<td>870</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>195000</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22810</td>
<td>1130</td>
<td>1441</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>2</td>
<td>195000</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6528</td>
<td>1112</td>
<td>1725</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>283000</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9607</td>
<td>1130</td>
<td>1001</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>410000</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12279</td>
<td>1112</td>
<td>750</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>65000</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2721</td>
<td>1114</td>
<td>1137</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>123900</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>14893 rows × 48 columns</p>
</div>
</div>
</div>
<div id="042719d5" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#new</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>X_train <span class="op">=</span> X_train.drop(columns<span class="op">=</span>[<span class="st">'parcel'</span>], errors<span class="op">=</span><span class="st">'ignore'</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>X_test <span class="op">=</span> X_test.drop(columns<span class="op">=</span>[<span class="st">'parcel'</span>], errors<span class="op">=</span><span class="st">'ignore'</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate the model</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">100</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model on the training data</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#model.fit(X_train, y_train)</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Make predictions on the test data</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#y_pred = model.predict(X_test)</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the model</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#print(classification_report(y_test, y_pred))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="971d9b64" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on the test set</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#y_pred = model.predict(X_test)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="8e2983a4" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Detailed classification report</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#print(classification_report(y_test, y_pred))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Chart 1:</p>
<div id="3995e27b" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot of livearea vs finbsmnt by before1980</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>chart1 <span class="op">=</span> ggplot(h_subset, aes(x<span class="op">=</span><span class="st">'livearea'</span>, y<span class="op">=</span><span class="st">'finbsmnt'</span>, color<span class="op">=</span><span class="st">'before1980'</span>)) <span class="op">+</span> geom_point() <span class="op">+</span> <span class="op">\</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    ggtitle(<span class="st">'Living Area vs. Finished Basement by Before1980'</span>) <span class="op">+</span> <span class="op">\</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    xlab(<span class="st">'Living Area (sq ft)'</span>) <span class="op">+</span> ylab(<span class="st">'Finished Basement Area (sq ft)'</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>chart1.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
   <div id="ZFJuCX"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   var containerDiv = document.getElementById("ZFJuCX");
   var observer = new ResizeObserver(function(entries) {
       for (let entry of entries) {
           var width = containerDiv.clientWidth
           if (entry.contentBoxSize && width > 0) {
           
               // Render plot
               if (observer) {
                   observer.disconnect();
                   observer = null;
               }

               var plotSpec={
"data":{
"livearea":[1152.0,880.0,767.0,1199.0,2092.0,874.0,701.0,2208.0,2170.0,1352.0,1297.0,1080.0,683.0,1274.0,2077.0,873.0,728.0,1743.0,2972.0,2226.0,1096.0,3146.0,1106.0,2761.0,847.0,1626.0,2271.0,904.0,697.0,2209.0,2144.0,2554.0,938.0,1088.0,941.0,1480.0,727.0,1722.0,1994.0,908.0,3261.0,1758.0,2562.0,2306.0,2153.0,1200.0,990.0,1920.0,711.0,2141.0,2229.0,1413.0,712.0,1247.0,1978.0,1602.0,809.0,894.0,749.0,825.0,1077.0,1584.0,1005.0,641.0,813.0,1778.0,2090.0,1910.0,1693.0,810.0,1287.0,1358.0,1494.0,996.0,1401.0,1151.0,912.0,2440.0,1039.0,1589.0,1149.0,2716.0,1320.0,1278.0,1413.0,922.0,763.0,1070.0,1785.0,971.0,1935.0,874.0,1601.0,1056.0,1558.0,1400.0,1088.0,2094.0,2549.0,1681.0,1568.0,834.0,798.0,690.0,2902.0,1203.0,676.0,1474.0,1722.0,939.0,1494.0,952.0,801.0,1319.0,993.0,1670.0,1231.0,649.0,1810.0,961.0,1274.0,902.0,1703.0,1164.0,922.0,1612.0,3320.0,2144.0,765.0,2180.0,964.0,1333.0,2223.0,1133.0,1508.0,891.0,1048.0,1006.0,976.0,524.0,1005.0,1013.0,927.0,808.0,1053.0,1632.0,1614.0,810.0,2301.0,1068.0,1487.0,1305.0,1786.0,1537.0,2061.0,1743.0,1500.0,2242.0,2961.0,1087.0,1075.0,982.0,1975.0,784.0,509.0,900.0,1747.0,2758.0,3339.0,1889.0,1451.0,1237.0,784.0,920.0,855.0,1345.0,558.0,1224.0,1731.0,3706.0,1516.0,1261.0,1508.0,2484.0,3150.0,4107.0,970.0,808.0,1077.0,1152.0,2169.0,1785.0,3524.0,1463.0,1343.0,1838.0,1702.0,512.0,887.0,1104.0,1305.0,969.0,744.0,968.0,711.0,2029.0,2619.0,2585.0,1057.0,1073.0,807.0,825.0,1060.0,953.0,1237.0,768.0,1760.0,1019.0,1456.0,881.0,1420.0,1795.0,2100.0,837.0,3317.0,1003.0,1322.0,1136.0,1017.0,1908.0,1956.0,1553.0,1660.0,1378.0,1370.0,1358.0,788.0,3228.0,851.0,1342.0,944.0,838.0,3500.0,744.0,2946.0,864.0,1124.0,1712.0,1712.0,563.0,1162.0,1008.0,1752.0,1186.0,1000.0,2152.0,2036.0,2763.0,1888.0,1371.0,3898.0,2543.0,2253.0,1263.0,1236.0,1017.0,822.0,1357.0,1416.0,642.0,1746.0,1164.0,1108.0,713.0,1441.0,462.0,1121.0,762.0,1887.0,998.0,2761.0,1208.0,1681.0,1755.0,1188.0,1557.0,938.0,3525.0,2036.0,1321.0,1145.0,1040.0,1204.0,944.0,1004.0,1449.0,1600.0,715.0,1039.0,1981.0,1641.0,4514.0,894.0,980.0,1090.0,1443.0,999.0,3103.0,732.0,2365.0,1142.0,1356.0,844.0,1149.0,1889.0,2082.0,774.0,1496.0,752.0,1733.0,772.0,1063.0,1754.0,1278.0,2578.0,1518.0,1359.0,1177.0,2793.0,1002.0,2093.0,1198.0,3179.0,1675.0,1058.0,1808.0,899.0,974.0,3215.0,902.0,861.0,3004.0,1178.0,837.0,731.0,2077.0,738.0,1939.0,2415.0,821.0,960.0,1340.0,2834.0,1932.0,2432.0,954.0,2374.0,499.0,1200.0,1549.0,976.0,831.0,3687.0,3235.0,1126.0,1074.0,1200.0,1044.0,751.0,2729.0,2345.0,1056.0,2909.0,1428.0,2238.0,1413.0,1420.0,1200.0,2801.0,1056.0,658.0,1731.0,1782.0,1767.0,2079.0,617.0,2115.0,811.0,1031.0,970.0,1620.0,1161.0,1226.0,1133.0,1423.0,1124.0,1096.0,1610.0,1034.0,792.0,1733.0,2301.0,1147.0,1189.0,2503.0,995.0,1502.0,876.0,2626.0,1900.0,2856.0,1203.0,1697.0,724.0,1021.0,3215.0,1884.0,2978.0,703.0,743.0,900.0,1607.0,2202.0,1866.0,966.0,804.0,1014.0,1091.0,1247.0,1845.0,1836.0,719.0,853.0,1363.0,1195.0,1234.0,1259.0,1861.0,1950.0,1406.0,711.0,908.0,918.0,1700.0,715.0,2365.0,1817.0,1182.0,2058.0,1576.0,675.0,1472.0,2180.0,1225.0,904.0,1712.0,853.0,959.0,1432.0,1322.0,963.0,795.0,988.0,812.0,2527.0,1040.0,1743.0,1744.0,1779.0,1228.0,1532.0,1317.0,1840.0,1412.0,909.0,919.0,1225.0,2157.0,1489.0,834.0,1895.0,938.0,1231.0,890.0,3483.0,951.0,870.0,1734.0,1626.0,1248.0,1033.0,1002.0,870.0,1267.0,1582.0,743.0,1238.0,2566.0,1798.0,1224.0],
"finbsmnt":[0.0,0.0,0.0,0.0,0.0,0.0,0.0,1008.0,0.0,1266.0,0.0,594.0,0.0,0.0,0.0,0.0,0.0,0.0,1208.0,0.0,980.0,0.0,0.0,1227.0,0.0,0.0,1009.0,0.0,0.0,0.0,1020.0,847.0,0.0,0.0,941.0,800.0,0.0,0.0,850.0,100.0,1620.0,0.0,1661.0,940.0,960.0,0.0,0.0,1602.0,0.0,0.0,414.0,0.0,330.0,0.0,0.0,190.0,730.0,614.0,712.0,495.0,977.0,495.0,375.0,641.0,731.0,1600.0,475.0,856.0,700.0,0.0,0.0,579.0,0.0,0.0,1211.0,0.0,865.0,827.0,935.0,718.0,913.0,0.0,0.0,271.0,0.0,645.0,0.0,970.0,0.0,0.0,847.0,0.0,0.0,0.0,350.0,0.0,0.0,0.0,842.0,521.0,0.0,0.0,0.0,0.0,1166.0,0.0,0.0,0.0,0.0,839.0,300.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,661.0,865.0,1147.0,767.0,558.0,0.0,0.0,365.0,0.0,0.0,0.0,0.0,915.0,0.0,0.0,0.0,1370.0,380.0,0.0,0.0,0.0,0.0,1005.0,0.0,0.0,108.0,0.0,374.0,0.0,0.0,0.0,0.0,0.0,650.0,981.0,0.0,1462.0,0.0,1240.0,0.0,663.0,466.0,846.0,0.0,0.0,706.0,0.0,0.0,0.0,1950.0,3000.0,0.0,0.0,0.0,0.0,0.0,0.0,1278.0,0.0,0.0,537.0,0.0,628.0,630.0,1154.0,0.0,1137.0,2310.0,712.0,730.0,0.0,1008.0,0.0,0.0,0.0,0.0,257.0,0.0,0.0,0.0,0.0,0.0,392.0,0.0,0.0,871.0,0.0,1030.0,0.0,0.0,0.0,482.0,0.0,825.0,390.0,0.0,0.0,768.0,1584.0,0.0,0.0,0.0,0.0,0.0,1012.0,0.0,0.0,700.0,0.0,0.0,0.0,0.0,1702.0,0.0,715.0,0.0,0.0,700.0,0.0,0.0,680.0,0.0,0.0,0.0,569.0,0.0,0.0,0.0,512.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1000.0,0.0,0.0,0.0,0.0,300.0,1415.0,715.0,0.0,0.0,0.0,380.0,0.0,0.0,790.0,0.0,952.0,0.0,0.0,0.0,0.0,0.0,0.0,255.0,605.0,671.0,968.0,0.0,0.0,0.0,954.0,0.0,0.0,0.0,0.0,0.0,0.0,990.0,408.0,0.0,896.0,1345.0,398.0,0.0,935.0,292.0,1641.0,0.0,0.0,0.0,900.0,0.0,750.0,0.0,0.0,646.0,1028.0,1119.0,364.0,0.0,0.0,0.0,0.0,888.0,0.0,0.0,0.0,905.0,578.0,0.0,1385.0,0.0,0.0,0.0,1172.0,0.0,862.0,1066.0,1474.0,525.0,0.0,0.0,404.0,0.0,1340.0,0.0,0.0,1610.0,401.0,0.0,0.0,1150.0,0.0,0.0,0.0,0.0,768.0,0.0,0.0,875.0,0.0,0.0,834.0,0.0,0.0,378.0,0.0,0.0,0.0,1637.0,1070.0,912.0,0.0,886.0,0.0,0.0,1270.0,596.0,0.0,0.0,0.0,0.0,0.0,0.0,850.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,297.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,996.0,0.0,0.0,750.0,0.0,960.0,796.0,932.0,0.0,683.0,1425.0,0.0,778.0,903.0,1285.0,0.0,635.0,0.0,0.0,831.0,841.0,1113.0,0.0,0.0,0.0,0.0,1220.0,461.0,0.0,725.0,0.0,0.0,0.0,0.0,800.0,0.0,0.0,783.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,681.0,0.0,677.0,0.0,839.0,583.0,0.0,788.0,0.0,641.0,0.0,763.0,0.0,0.0,0.0,0.0,0.0,1432.0,0.0,482.0,450.0,889.0,0.0,0.0,919.0,0.0,225.0,0.0,246.0,424.0,0.0,463.0,0.0,0.0,0.0,0.0,460.0,1190.0,0.0,0.0,400.0,946.0,186.0,809.0,0.0,823.0,750.0,560.0,0.0,723.0,0.0,0.0,0.0,0.0,0.0,0.0,1001.0,0.0,0.0],
"before1980":[1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,0.0,0.0,0.0,1.0,1.0,1.0,0.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0]
},
"mapping":{
"x":"livearea",
"y":"finbsmnt",
"color":"before1980"
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"livearea"
},{
"type":"int",
"column":"finbsmnt"
},{
"type":"int",
"column":"basement"
},{
"type":"int",
"column":"nocars"
},{
"type":"int",
"column":"numbdrm"
},{
"type":"int",
"column":"numbaths"
},{
"type":"int",
"column":"before1980"
},{
"type":"int",
"column":"stories"
},{
"type":"int",
"column":"yrbuilt"
}]
},
"ggtitle":{
"text":"Living Area vs. Finished Basement by Before1980"
},
"guides":{
"x":{
"title":"Living Area (sq ft)"
},
"y":{
"title":"Finished Basement Area (sq ft)"
}
},
"kind":"plot",
"scales":[],
"layers":[{
"geom":"point",
"mapping":{
},
"data_meta":{
},
"data":{
}
}],
"metainfo_list":[],
"spec_id":"3"
};
               window.letsPlotCall(function() {
       
               var toolbar = null;
               var plotContainer = containerDiv;               
               
                   var options = {
                       sizing: {
                           width_mode: "min",
                           height_mode: "scaled",
                           width: width
                       }
                   };
                   var fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer, options);
                   if (toolbar) {
                     toolbar.bind(fig);
                   }
               });
               
               break;
           }
       }
   });
   
   observer.observe(containerDiv);
   
   // ----------
   })();
   
   </script>
</div>
</div>
<p>Chart 2:</p>
<div id="c20c0333" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Question 1|Chart 2</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlation matrix and round values</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> h_subset.corr()</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>corr_rounded <span class="op">=</span> corr.reset_index().melt(id_vars<span class="op">=</span><span class="st">'index'</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>corr_rounded[<span class="st">'value'</span>] <span class="op">=</span> corr_rounded[<span class="st">'value'</span>].<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation heatmap</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>corr_chart <span class="op">=</span> ggplot(corr_rounded, aes(x<span class="op">=</span><span class="st">'index'</span>, y<span class="op">=</span><span class="st">'variable'</span>, fill<span class="op">=</span><span class="st">'value'</span>)) <span class="op">+</span> <span class="op">\</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    geom_tile() <span class="op">+</span> geom_text(aes(label<span class="op">=</span><span class="st">'value'</span>), color<span class="op">=</span><span class="st">'white'</span>, size<span class="op">=</span><span class="dv">8</span>) <span class="op">+</span> <span class="op">\</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    scale_fill_gradient2(low<span class="op">=</span><span class="st">'blue'</span>, mid<span class="op">=</span><span class="st">'white'</span>, high<span class="op">=</span><span class="st">'red'</span>, midpoint<span class="op">=</span><span class="dv">0</span>) <span class="op">+</span> <span class="op">\</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    ggtitle(<span class="st">'Correlation Heatmap of Home Variables'</span>)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>corr_chart.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
   <div id="EvLSvP"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   var containerDiv = document.getElementById("EvLSvP");
   var observer = new ResizeObserver(function(entries) {
       for (let entry of entries) {
           var width = containerDiv.clientWidth
           if (entry.contentBoxSize && width > 0) {
           
               // Render plot
               if (observer) {
                   observer.disconnect();
                   observer = null;
               }

               var plotSpec={
"data":{
"index":["livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt","livearea","finbsmnt","basement","nocars","numbdrm","numbaths","before1980","stories","yrbuilt"],
"variable":["livearea","livearea","livearea","livearea","livearea","livearea","livearea","livearea","livearea","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","finbsmnt","basement","basement","basement","basement","basement","basement","basement","basement","basement","nocars","nocars","nocars","nocars","nocars","nocars","nocars","nocars","nocars","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbdrm","numbaths","numbaths","numbaths","numbaths","numbaths","numbaths","numbaths","numbaths","numbaths","before1980","before1980","before1980","before1980","before1980","before1980","before1980","before1980","before1980","stories","stories","stories","stories","stories","stories","stories","stories","stories","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt","yrbuilt"],
"value":[1.0,0.32,0.5,0.5,0.59,0.8,-0.36,0.57,0.26,0.32,1.0,0.81,0.41,0.14,0.5,0.01,0.04,0.01,0.5,0.81,1.0,0.51,0.28,0.57,-0.06,0.18,0.02,0.5,0.41,0.51,1.0,0.48,0.51,-0.14,0.3,0.09,0.59,0.14,0.28,0.48,1.0,0.48,-0.05,0.33,0.02,0.8,0.5,0.57,0.51,0.48,1.0,-0.44,0.61,0.37,-0.36,0.01,-0.06,-0.14,-0.05,-0.44,1.0,-0.45,-0.82,0.57,0.04,0.18,0.3,0.33,0.61,-0.45,1.0,0.26,0.26,0.01,0.02,0.09,0.02,0.37,-0.82,0.26,1.0]
},
"mapping":{
"x":"index",
"y":"variable",
"fill":"value"
},
"data_meta":{
"series_annotations":[{
"type":"str",
"column":"index"
},{
"type":"str",
"column":"variable"
},{
"type":"float",
"column":"value"
}]
},
"ggtitle":{
"text":"Correlation Heatmap of Home Variables"
},
"kind":"plot",
"scales":[{
"aesthetic":"fill",
"low":"blue",
"mid":"white",
"high":"red",
"midpoint":0.0,
"scale_mapper_kind":"color_gradient2"
}],
"layers":[{
"geom":"tile",
"mapping":{
},
"data_meta":{
},
"data":{
}
},{
"geom":"text",
"mapping":{
"label":"value"
},
"data_meta":{
},
"color":"white",
"size":8.0,
"data":{
}
}],
"metainfo_list":[],
"spec_id":"4"
};
               window.letsPlotCall(function() {
       
               var toolbar = null;
               var plotContainer = containerDiv;               
               
                   var options = {
                       sizing: {
                           width_mode: "min",
                           height_mode: "scaled",
                           width: width
                       }
                   };
                   var fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer, options);
                   if (toolbar) {
                     toolbar.bind(fig);
                   }
               });
               
               break;
           }
       }
   });
   
   observer.observe(containerDiv);
   
   // ----------
   })();
   
   </script>
</div>
</div>
<p>Chart 3:</p>
<div id="ca6fa618" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Question 1|Chart 3</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of stories by before1980</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>chart3 <span class="op">=</span> ggplot(h_subset, aes(x<span class="op">=</span><span class="st">'stories'</span>, fill<span class="op">=</span><span class="st">'before1980'</span>)) <span class="op">+</span> <span class="op">\</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    geom_bar(position<span class="op">=</span><span class="st">'dodge'</span>) <span class="op">+</span> <span class="op">\</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    ggtitle(<span class="st">'Number of Stories by Before1980'</span>) <span class="op">+</span> <span class="op">\</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    xlab(<span class="st">'Number of Stories'</span>) <span class="op">+</span> ylab(<span class="st">'Count'</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>chart3.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
   <div id="1VdYmB"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   var containerDiv = document.getElementById("1VdYmB");
   var observer = new ResizeObserver(function(entries) {
       for (let entry of entries) {
           var width = containerDiv.clientWidth
           if (entry.contentBoxSize && width > 0) {
           
               // Render plot
               if (observer) {
                   observer.disconnect();
                   observer = null;
               }

               var plotSpec={
"data":{
},
"mapping":{
"x":"stories",
"fill":"before1980"
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"livearea"
},{
"type":"int",
"column":"finbsmnt"
},{
"type":"int",
"column":"basement"
},{
"type":"int",
"column":"nocars"
},{
"type":"int",
"column":"numbdrm"
},{
"type":"int",
"column":"numbaths"
},{
"type":"int",
"column":"before1980"
},{
"type":"int",
"column":"stories"
},{
"type":"int",
"column":"yrbuilt"
}]
},
"ggtitle":{
"text":"Number of Stories by Before1980"
},
"guides":{
"x":{
"title":"Number of Stories"
},
"y":{
"title":"Count"
}
},
"kind":"plot",
"scales":[],
"layers":[{
"geom":"bar",
"mapping":{
},
"position":"dodge",
"data_meta":{
},
"data":{
"..count..":[327.0,158.0,14.0,1.0],
"stories":[1.0,2.0,3.0,4.0],
"before1980":[0.6439999999999999,0.6439999999999999,0.6439999999999999,0.6439999999999999]
}
}],
"metainfo_list":[],
"spec_id":"5"
};
               window.letsPlotCall(function() {
       
               var toolbar = null;
               var plotContainer = containerDiv;               
               
                   var options = {
                       sizing: {
                           width_mode: "min",
                           height_mode: "scaled",
                           width: width
                       }
                   };
                   var fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer, options);
                   if (toolbar) {
                     toolbar.bind(fig);
                   }
               });
               
               break;
           }
       }
   });
   
   observer.observe(containerDiv);
   
   // ----------
   })();
   
   </script>
</div>
</div>
</section>
<section id="questiontask-2" class="level2">
<h2 class="anchored" data-anchor-id="questiontask-2">Question|Task 2</h2>
<p><strong>Build a classification model labeling houses as being built “before 1980” or “during or after 1980”. Your goal is to reach or exceed 90% accuracy. Explain your final model choice (algorithm, tuning parameters, etc) and describe what other models you tried.</strong></p>
<p>The model I chose is the Gradient Boosting Classifier. It’s accuracy is 93.13% comared to the next best, Decision Tree Classifier with 90.05%. I also did a Logistic Regression model and a Random Forest model. However neither reached 90%. I included all models below to show the work.</p>
<p>Logistic Regression Model</p>
<div id="q2-table" class="cell tbl-cap-location-top" data-tbl-cap="table example" data-execution_count="16">
<div class="sourceCode cell-code" id="cb18" data-cap-location="top"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the parcel column</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#X_train = X_train.drop('parcel', axis=1)</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#X_test = X_test.drop('parcel', axis=1)</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Train Logistic Regression</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>log_model <span class="op">=</span> LogisticRegression(max_iter<span class="op">=</span><span class="dv">1000</span>, random_state<span class="op">=</span><span class="dv">76</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>log_model.fit(X_train, y_train.values.ravel())  <span class="co"># Flatten y_train for compatibility</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict and evaluate</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>y_pred_log <span class="op">=</span> log_model.predict(X_test)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>accuracy_log <span class="op">=</span> accuracy_score(y_test, y_pred_log)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Logistic Regression Accuracy: </span><span class="sc">{</span>accuracy_log<span class="sc">:.2%}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-cap-location="top"><code>Logistic Regression Accuracy: 83.78%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre data-cap-location="top"><code>/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/sklearn/linear_model/_logistic.py:465: ConvergenceWarning:

lbfgs failed to converge (status=1):
STOP: TOTAL NO. of ITERATIONS REACHED LIMIT.

Increase the number of iterations (max_iter) or scale the data as shown in:
    https://scikit-learn.org/stable/modules/preprocessing.html
Please also refer to the documentation for alternative solver options:
    https://scikit-learn.org/stable/modules/linear_model.html#logistic-regression
</code></pre>
</div>
</div>
<p>Decision Treel Model</p>
<div id="af6d7e6e" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Train Decision Tree</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>dt_model <span class="op">=</span> DecisionTreeClassifier(max_depth<span class="op">=</span><span class="dv">10</span>, random_state<span class="op">=</span><span class="dv">76</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>dt_model.fit(X_train, y_train.values.ravel())</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict and evaluate</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>y_pred_dt <span class="op">=</span> dt_model.predict(X_test)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>accuracy_dt <span class="op">=</span> accuracy_score(y_test, y_pred_dt)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Decision Tree Accuracy: </span><span class="sc">{</span>accuracy_dt<span class="sc">:.2%}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Decision Tree Accuracy: 90.05%</code></pre>
</div>
</div>
<p>Random Forest Model</p>
<div id="f4ed7631" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Train Random Forest</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>rf_model <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">100</span>, max_depth<span class="op">=</span><span class="dv">10</span>, random_state<span class="op">=</span><span class="dv">76</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>rf_model.fit(X_train, y_train.values.ravel())</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict and evaluate</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>y_pred_rf <span class="op">=</span> rf_model.predict(X_test)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>accuracy_rf <span class="op">=</span> accuracy_score(y_test, y_pred_rf)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Random Forest Accuracy: </span><span class="sc">{</span>accuracy_rf<span class="sc">:.2%}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Random Forest Accuracy: 89.66%</code></pre>
</div>
</div>
<p>Gradient Boosting Model</p>
<div id="9f7f41e3" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> GradientBoostingClassifier</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Train Gradient Boosting</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>gb_model <span class="op">=</span> GradientBoostingClassifier(n_estimators<span class="op">=</span><span class="dv">100</span>, learning_rate<span class="op">=</span><span class="fl">0.1</span>, max_depth<span class="op">=</span><span class="dv">10</span>, random_state<span class="op">=</span><span class="dv">76</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>gb_model.fit(X_train, y_train.values.ravel())</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict and evaluate</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>y_pred_gb <span class="op">=</span> gb_model.predict(X_test)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>accuracy_gb <span class="op">=</span> accuracy_score(y_test, y_pred_gb)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Gradient Boosting Accuracy: </span><span class="sc">{</span>accuracy_gb<span class="sc">:.2%}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Gradient Boosting Accuracy: 93.03%</code></pre>
</div>
</div>
</section>
<section id="questiontask-3" class="level2">
<h2 class="anchored" data-anchor-id="questiontask-3">Question|Task 3</h2>
<p><strong>Justify your classification model by discussing the most important features selected by your model. This discussion should include a feature importance chart and a description of the features.</strong></p>
<p>The most important feature selected from the Gradient Boosting model and as shown in the chart below is arcstyle_ONE-STORY. Homes with a one-story architectural style were the most important feature. One-story homes are more common in older constructions, making this a strong predictor.</p>
<p>The next most important feature is gartype_Att. Attached garages are more common in newer homes, helping differentiate homes built before and after 1980.</p>
<p>The third most important is homes with quality_C classification reflect specific building standards or materials, often indicative of construction time periods.</p>
<p>The livearea. The total living area is a significant feature, as older homes often have smaller living spaces.</p>
<p>The basement. The presence and size of basements contribute to distinguishing between older and newer homes.</p>
<p>How many stories in a home reflects architectural trends, with single-story homes appearing more often in older constructions.</p>
<p>The remaining features include tasp, sprice, numbaths, and abstrprd. These last few contribute by informing us of market trends, home characteristics, the sales price, and time-sensitive data.</p>
<p>This model was able to identify specific trends in the construction of houses built before 1980. The combination of the features identified can give the client a strong predictor of whether a house was built pre 1980.</p>
<div id="3e25fe3f" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract feature importances</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>importances <span class="op">=</span> gb_model.feature_importances_</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>feature_names <span class="op">=</span> X_train.columns</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a DataFrame of features and their importance</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>importance_df <span class="op">=</span> pd.DataFrame({<span class="st">'Feature'</span>: feature_names, <span class="st">'Importance'</span>: importances})</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>importance_df <span class="op">=</span> importance_df.sort_values(by<span class="op">=</span><span class="st">'Importance'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the top 10 features</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(importance_df.head(<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Feature  Importance
37  arcstyle_ONE-STORY    0.249744
25         gartype_Att    0.124531
22           quality_C    0.114646
1             livearea    0.102244
3             basement    0.048565
5              stories    0.040330
12                tasp    0.036233
9               sprice    0.031121
8             numbaths    0.026415
0             abstrprd    0.026217</code></pre>
</div>
</div>
<div id="790bb2f7" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the top 10 features</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>plt.barh(importance_df[<span class="st">'Feature'</span>][:<span class="dv">10</span>][::<span class="op">-</span><span class="dv">1</span>], importance_df[<span class="st">'Importance'</span>][:<span class="dv">10</span>][::<span class="op">-</span><span class="dv">1</span>], color<span class="op">=</span><span class="st">'skyblue'</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Top 10 Most Important Features (Gradient Boosting)'</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Feature Importance'</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Feature'</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="project4_files/figure-html/cell-22-output-1.png" width="927" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="questiontask-4" class="level2">
<h2 class="anchored" data-anchor-id="questiontask-4">Question|Task 4</h2>
<p><strong>Describe the quality of your classification model using 2-3 different evaluation metrics. You also need to explain how to interpret each of the evaluation metrics you use.</strong></p>
<p>I am using the Accuracy, Precision/Recall (F1-Score), and the Confusion Matrix. The accuracy matrix shows the overall measure of the model’s performance. In this case, 93.13%. This means 93% of all homes were correctly classified as pre-1980 or post-1980.</p>
<p>The Precision/Recall(F1-Score) Shows the scores for precision, recall, and f1-score, which are the following range respectively: .9, .91, .91 and .95, .94, .95. It then shows the accuracy, magro average, and the weighted average of those scores, all of them being 93%. Precision ensures it doesn’t overpredict values. High recall ensures the model correctly identifies most homes. F1-Score balances Precision and Recall, showing strong performance in both.</p>
<p>Between the actual and predicted number, the confusion matrix shows pre-1980 correctly classified at 4,755. Post-1980 correctly classified at 2,714. Post-1980 misclassified as Pre-1980 at 266. Pre-1980 misclassified as Post-1980 at 285. The result is that the model performs well, as it has low misclassifications compared to the number correctly classified.</p>
<div id="d965176a" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>accuracy <span class="op">=</span> accuracy_score(y_test, y_pred_gb)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Accuracy: </span><span class="sc">{</span>accuracy<span class="sc">:.2%}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy: 93.03%</code></pre>
</div>
</div>
<div id="6b3a80e7" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Classification report</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, y_pred_gb))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

           0       0.90      0.91      0.91      2980
           1       0.95      0.94      0.94      5040

    accuracy                           0.93      8020
   macro avg       0.92      0.93      0.93      8020
weighted avg       0.93      0.93      0.93      8020
</code></pre>
</div>
</div>
<div id="51b22cec" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Confusion Matrix</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>conf_matrix <span class="op">=</span> confusion_matrix(y_test, y_pred_gb)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Confusion Matrix</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>sns.heatmap(conf_matrix, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'d'</span>, cmap<span class="op">=</span><span class="st">'Blues'</span>, xticklabels<span class="op">=</span>[<span class="st">'Post-1980'</span>, <span class="st">'Pre-1980'</span>], yticklabels<span class="op">=</span>[<span class="st">'Post-1980'</span>, <span class="st">'Pre-1980'</span>])</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Predicted'</span>)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Actual'</span>)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Confusion Matrix'</span>)</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="project4_files/figure-html/cell-25-output-1.png" width="564" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/camilleflake\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Camille Flake 2024©</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="Yhttps://www.linkedin.com/feed/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>